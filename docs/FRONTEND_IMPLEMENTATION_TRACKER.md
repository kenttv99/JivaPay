# Трекер Реализации Frontend JivaPay

Этот документ помогает отслеживать, что уже сделано в фронтенд-части JivaPay, а что еще предстоит реализовать. Он основан на архитектуре, описанной в `README_ARCHITECTURE_FRONTEND.md`.

Статус задач:
- [ ] Не начато
- [x] Готово
- [/] В процессе

Для каждой задачи можно добавить комментарии, ссылки на PR или коммиты.

---

## 1. Общая Настройка Проекта и Монорепозитория

- [x] **Настройка Монорепозитория**: Используется npm workspaces (package.json в /frontend), все приложения и ui-kit подключены как workspace-пакеты.
- [ ] **Настройка CI/CD**: Базовая настройка CI/CD для сборки и линтинга фронтенд-приложений.
- [ ] **Генерация Типов из OpenAPI**: Настройка автоматической генерации TypeScript типов на основе OpenAPI спецификации бэкенда.
- [x] **Общие Инструменты Качества Кода**:
    - [x] Конфигурация ESLint для TypeScript/React (настроена для admin_app).
    - [ ] Конфигурация Prettier для форматирования кода.
    - [ ] Конфигурация Stylelint для CSS/SCSS.

---

## 2. Общие Пакеты (`packages/`) в Монорепозитории

### 2.1. `ui-kit` (Библиотека Общих Компонентов)
- [x] **Разработка Базовых Компонентов**:
    - [x] Button (реализован с вариантами стилей)
    - [x] Card (реализован с модульными стилями)
    - [x] Input (реализован с валидацией)
    - [ ] Checkbox, RadioButton
    - [ ] Select, Dropdown
    - [ ] Modal
    - [ ] Table
    - [ ] Tabs
    - [ ] Accordion
    - [ ] Tooltip, Popover
    - [ ] Spinner/Loader
    - [ ] Notifications/Alerts
    - [ ] Pagination
    - [ ] Breadcrumbs
    - [ ] Avatar
    - [ ] Iconography system
- [x] **Темизация**:
    - [x] Реализация темизации через CSS Custom Properties (полная система переменных).
    - [x] Темы для admin_app (светлая тема реализована).
    - [ ] Механизм смены тем (например, светлая/темная), если требуется.
- [x] **Кастомизация**: Все компоненты поддерживают настройку через пропсы и переменные.
- [x] **Анимации**: Базовые анимации (fadeIn) реализованы.
- [ ] **Документация Компонентов**: Storybook или аналог не настроен.
- [ ] **Доступность (a11y)**: Требует доработки.

### 2.2. `types` (Общие Типы)
- [/] Определение общих TypeScript интерфейсов (начата работа в admin_app компонентах).

### 2.3. `utils` (Общие Утилиты)
- [/] Создание общих вспомогательных функций (форматирование дат, валют частично реализовано в компонентах).

### 2.4. `hooks` (Общие Хуки)
- [ ] Разработка общих переиспользуемых React хуков (например, `useDebounce`, `useLocalStorage`, `useMediaQuery`).

### 2.5. `config` (Общие Настройки)
- [x] Определение структуры для общих констант и настроек (создана папка config в admin_app).

### 2.6. `i18n` (Интернационализация)
- [ ] **Настройка Библиотеки**: Выбор и настройка `i18next` с `react-i18next`.
- [ ] **Структура Переводов**: Создание структуры для общих JSON файлов переводов (например, `en.json`, `ru.json`).
- [ ] **Механизм Загрузки**: Реализация загрузки общих переводов в приложения.
- [ ] **Базовые Общие Ключи**: Добавление переводов для общих элементов `ui-kit` (например, "Сохранить", "Отмена").

---

## 3. Разработка Приложений

### 3.1. Приложение Администратора (`admin_app`)
- **Начальная Настройка**:
    - [x] Создание структуры директорий (`assets`, `components`, `app`, `layouts`, `services`, `hooks`, `animations`, `store`, `contexts`, `types`, `utils`, `locales`, `styles`).
    - [x] Настройка базового роутинга (Next.js App Router).
    - [x] Подключение глобальных стилей - ОБЪЕДИНЕНЫ В ОДИН `styles/global.css` с импортом Tailwind CSS.
    - [x] Создание и подключение файла темы (`styles/theme.css` с полной системой CSS переменных).
    - [x] Интеграция с `ui-kit` (создан базовый ui-kit с Button, Card, Input; подключен к admin_app через alias и workspace).
    - [x] Настроены alias для ui-kit в tsconfig.json.
    - [x] В package.json admin_app добавлен ui-kit как зависимость.
    - [x] SPA-архитектура: все внутренние приложения реализованы как SPA (без SSR).
    - [ ] Настройка специфичных для приложения переводов и их слияние с общими.

- **Реализация `layouts/`**:
    - [x] `MainLayout.tsx` (полностью реализован с Sidebar и Header).
    - [ ] `AuthLayout.tsx` (для страниц аутентификации).

- **Реализация `components/`**:
    - [x] **`widgets/`**: 
        - [x] `Sidebar.tsx` (полная навигация)
        - [x] `Header.tsx` (заголовок с профилем)
        - [x] `StatsCard.tsx` (переиспользуемые карточки статистики)
    - [x] **`ui/`**: Специфичные для admin_app UI компоненты:
        - [x] `DataTable.tsx` (универсальная таблица с пагинацией и сортировкой)
        - [x] `StatusBadge.tsx` (бейджи статусов с цветовой кодировкой)
        - [x] `TabGroup.tsx` (табы со счетчиками)
    - [x] **`features/`**: Бизнес-компоненты по доменам:
        - [x] `Dashboard/` - компоненты дашборда (RecentOrders и др.)
        - [x] `Users/` - управление пользователями (UserManagement)
        - [x] `Finance/` - финансовое управление (FinanceManagement)
        - [x] `Charts/` - аналитика (AnalyticsManagement)
        - [x] `Stores/` - управление магазинами (StoreManagement)
        - [x] `Settings/` - настройки системы (SettingsManagement)

- **Реализация Страниц (`app/`)**:
    - [x] `app/page.tsx` (главная страница дашборда с реальными компонентами).
    - [x] `app/users/page.tsx` (полностью переделана с табовой структурой по ролям).
    - [x] `app/finance/page.tsx` (переделана с компонентом FinanceManagement).
    - [x] `app/charts/page.tsx` (переделана с AnalyticsManagement).
    - [x] `app/stores/page.tsx` (переделана с StoreManagement).
    - [x] `app/settings/page.tsx` (переделана с SettingsManagement).
    - [x] `app/not-found.tsx` (страница 404).
    - [ ] Страница аутентификации.
    - [ ] Логи и мониторинг (просмотр аудита, системных ошибок).

- **Реализация `services/`**:
    - [x] Создана структура папки services.
    - [ ] Настройка инстанса Axios/fetch для API `admin_app`.
    - [ ] Функции для взаимодействия с эндпоинтами администратора.

- **Реализация `store/` / `contexts/`**:
    - [x] Создана структура папок для contexts.
    - [ ] Управление состоянием аутентификации.
    - [ ] Состояние для списков, форм, фильтров.

- **Безопасность**:
    - [ ] Реализация безопасного хранения JWT токена.
    - [ ] Проверка и очистка вводимых данных для предотвращения XSS.

- **Анимации (`animations/`)**:
    - [x] Определение базовых анимаций (fadeIn) в ui-kit.
    - [x] Реализация skeleton loading для лучшего UX.

- **Кодовая Оптимизация**:
    - [x] **Устранение дублирования**: Создан переиспользуемый DataTable для всех таблиц.
    - [x] **Унификация UI**: Все карточки метрик используют StatsCard.
    - [x] **Единые статусы**: StatusBadge обеспечивает консистентную цветовую кодировку.
    - [x] **Типизация**: TypeScript интерфейсы для всех компонентов.
    - [x] **Консистентность стилей**: Объединение CSS файлов, устранение дублирования импортов.
    - [x] **Архитектурная чистота**: Разделение на ui/features/widgets компоненты.

### 3.2. Приложение Мерчанта (`merchant_app`)
- [x] Начальная настройка (структура создана, базовая конфигурация)
- [ ] Реализация `layouts/`
- [ ] Реализация `components/` (ui, features, widgets)
- [ ] Реализация Страниц (`app/`)
    - [ ] Дашборд с балансами и статистикой
    - [ ] Список магазинов с настройками
    - [ ] История ордеров
    - [ ] Настройки профиля
    - [ ] Документация по API
- [ ] Реализация `services/`
- [ ] Реализация `store/` / `contexts/`
- [ ] Безопасность

### 3.3. Приложение Трейдера (`trader_app`)
- [x] Начальная настройка (структура создана, базовая конфигурация)
- [ ] Реализация `layouts/`
- [ ] Реализация `components/`
- [ ] Реализация Страниц (`app/`)
    - [ ] Дашборд с балансами
    - [ ] Управление реквизитами
    - [ ] Назначенные ордера
    - [ ] История балансов
    - [ ] Настройки профиля
- [ ] Реализация `services/`
- [ ] Реализация `store/` / `contexts/`
- [ ] Безопасность

### 3.4. Приложение Саппорта (`support_app`)
- [x] Начальная настройка (структура создана, базовая конфигурация)
- [ ] Реализация `layouts/`
- [ ] Реализация `components/`
- [ ] Реализация Страниц (`app/`)
    - [ ] Универсальный поиск
    - [ ] Просмотр ордеров
    - [ ] Просмотр пользователей
    - [ ] Настройки профиля
- [ ] Реализация `services/`
- [ ] Реализация `store/` / `contexts/`
- [ ] Безопасность

### 3.5. Приложение Тимлида (`teamlead_app`)
- [x] Начальная настройка (структура создана, базовая конфигурация)
- [ ] Реализация `layouts/`
- [ ] Реализация `components/`
- [ ] Реализация Страниц (`app/`)
    - [ ] Статистика команды
    - [ ] Управление трейдерами (назначение, статусы)
    - [ ] Просмотр реквизитов команды
    - [ ] Настройки профиля
- [ ] Реализация `services/`
- [ ] Реализация `store/` / `contexts/`
- [ ] Безопасность

---

## 4. Интеграция Платежного Шлюза (Фронтенд Часть)

- [ ] **Хостируемая Страница Оплаты**:
    - [ ] Кастомизация UI страницы (если это делается на фронтенде JivaPay, а не только мерчантом).
    - [ ] Обработка взаимодействия пользователя на странице.
- [ ] **Платежный Виджет**:
    - [ ] Разработка UI виджета (если он предоставляется JivaPay).
    - [ ] Реализация логики встраивания виджета на сайт мерчанта.
    - [ ] API взаимодействия с виджетом.

---

## 5. Тестирование Фронтенда

- [ ] **Unit-тесты**:
    - [ ] Настройка Jest/Vitest и React Testing Library.
    - [ ] Покрытие тестами утилит, хуков, сервисных функций.
    - [ ] Тестирование логики компонентов.
- [ ] **Компонентные Тесты**:
    - [ ] Тестирование UI-компонентов (включая `ui-kit`) через React Testing Library и Storybook.
- [ ] **Интеграционные Тесты**:
    - [ ] Тестирование взаимодействия между компонентами, страницами и сервисами.
- [ ] **E2E Тесты**:
    - [ ] Настройка Cypress или Playwright.
    - [ ] Написание тестов для ключевых пользовательских сценариев в каждом приложении.

---

## 6. Развертывание и CI/CD Фронтенда

- [ ] **Сборка Приложений**: Оптимизация сборки для production (tree-shaking, code splitting, lazy loading).
- [ ] **Деплой**: Настройка деплоя каждого приложения на свой поддомен.
- [ ] **CI/CD Пайплайны**:
    - [ ] Автоматизация линтинга, тестирования, сборки и деплоя при изменениях в коде.
    - [ ] Настройка preview-деплоев для веток.

---

## 7. UI/UX Ревью и Доступность

- [/] **UI/UX Ревью**: Проведено в рамках рефакторинга admin_app с унификацией компонентов.
- [ ] **Доступность (a11y)**:
    - [ ] Проверка на соответствие WCAG стандартам.
    - [ ] Учет `prefers-reduced-motion` для анимаций.
    - [ ] Тестирование с использованием скрин-ридеров и клавиатурной навигации.

---

## 8. Достигнутые Результаты Рефакторинга

### **Статистика Оптимизации (admin_app)**:
- **Сокращение дублирования кода**: ~60-70% дублирующихся UI паттернов устранено
- **Переиспользуемые компоненты**: 6 основных компонентов (DataTable, StatsCard, StatusBadge, TabGroup, Sidebar, Header)
- **Унифицированные страницы**: 6 страниц полностью переделаны с новой архитектурой
- **Объединение файлов**: CSS файлы консолидированы, дублирующий app/globals.css удален
- **TypeScript покрытие**: Все новые компоненты полностью типизированы

### **Архитектурные Улучшения**:
- [x] **Модульная структура**: Четкое разделение на ui/features/widgets
- [x] **Консистентный дизайн**: Единая система переменных CSS и компонентов
- [x] **Масштабируемость**: Готовая основа для интеграции с API
- [x] **Maintainability**: Значительно упрощена поддержка кода

### **Готовность к API Интеграции**:
- [x] **Структура данных**: Интерфейсы готовы для подключения реальных данных
- [x] **Компонентная архитектура**: Легкая замена mock данных на API вызовы
- [x] **Состояния загрузки**: Заготовки для loading и error состояний 